import{h as p}from"./vendor.97d5d60b.js";const P=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const l of h)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(h){const l={};return h.integrity&&(l.integrity=h.integrity),h.referrerpolicy&&(l.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?l.credentials="include":h.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(h){if(h.ep)return;h.ep=!0;const l=s(h);fetch(h.href,l)}};P();const n=document.querySelector("canvas"),e=n.getContext("2d");n.width=innerWidth;n.height=innerHeight;const M=document.querySelector("#scoreEl"),U=document.querySelector("#startGameBtn"),A=document.querySelector("#modalEl"),S=document.querySelector("#bigScoreEl"),g=document.querySelector("#soundOffEl"),E=document.querySelector("#soundOnEl"),G=new Audio("./audio/startGame.mp3"),N=new Audio("./audio/endGame.mp3"),B=new p.Howl({src:["./audio/shoot.mp3"]}),C=new p.Howl({src:["./audio/enemyHit.mp3"]}),R=new p.Howl({src:["./audio/enemyEliminated.mp3"]}),W=new p.Howl({src:["./audio/obtainPowerUp.mp3"]}),f=new Audio("./audio/backgroundMusic.mp3");f.loop=!0;const L={active:!1};class X{constructor(i,s,o,h){this.x=i,this.y=s,this.radius=o,this.color=h,this.velocity={x:0,y:0},this.friction=.99,this.powerUp=""}draw(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill()}update(){this.draw(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.x-this.radius+this.velocity.x>0&&this.x+this.radius+this.velocity.x<n.width?this.x=this.x+this.velocity.x:this.velocity.x=0,this.y-this.radius+this.velocity.y>0&&this.y+this.radius+this.velocity.y<n.height?this.y=this.y+this.velocity.y:this.velocity.y=0,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}shoot(i,s="white"){const o=Math.atan2(i.y-this.y,i.x-this.x),h={x:Math.cos(o)*5,y:Math.sin(o)*5};y.push(new Y(this.x,this.y,5,s,h)),B.play()}}class Y{constructor(i,s,o,h,l){this.x=i,this.y=s,this.radius=o,this.color=h,this.velocity=l}draw(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill()}update(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}const b=new Image;b.src="./img/lightning.png";class z{constructor(i,s,o){this.x=i,this.y=s,this.velocity=o,this.width=14,this.height=18,this.radians=0}draw(){e.save(),e.translate(this.x+this.width/2,this.y+this.height/2),e.rotate(this.radians),e.translate(-this.x-this.width/2,-this.y-this.height/2),e.drawImage(b,this.x,this.y,14,18),e.restore()}update(){this.radians+=.002,this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class K{constructor(i,s,o,h,l){this.x=i,this.y=s,this.radius=o,this.color=h,this.velocity=l,this.type="linear",this.center={x:i,y:s},this.radians=0,Math.random()<.25&&(this.type="homing",Math.random()<.5&&(this.type="spinning",Math.random()<.75&&(this.type="homingSpinning")))}draw(){e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill()}update(){if(this.draw(),this.type==="linear")this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y;else if(this.type==="homing"){const i=Math.atan2(a.y-this.y,a.x-this.x);this.velocity={x:Math.cos(i),y:Math.sin(i)},this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}else if(this.type==="spinning")this.radians+=.05,this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.x=this.center.x+Math.cos(this.radians)*100,this.y=this.center.y+Math.sin(this.radians)*100;else if(this.type==="homingSpinning"){const i=Math.atan2(a.y-this.y,a.x-this.x);this.velocity={x:Math.cos(i),y:Math.sin(i)},this.radians+=.05,this.center.x+=this.velocity.x,this.center.y+=this.velocity.y,this.x=this.center.x+Math.cos(this.radians)*100,this.y=this.center.y+Math.sin(this.radians)*100}}}const F=.99;class ${constructor(i,s,o,h,l){this.x=i,this.y=s,this.radius=o,this.color=h,this.velocity=l,this.alpha=1}draw(){e.save(),e.globalAlpha=this.alpha,e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill(),e.restore()}update(){this.draw(),this.velocity.x*=F,this.velocity.y*=F,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}class D{constructor(i,s,o,h){this.x=i,this.y=s,this.radius=o,this.color=h,this.alpha=.05,this.initialAlpha=this.alpha}draw(){e.save(),e.globalAlpha=this.alpha,e.beginPath(),e.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill(),e.restore()}update(){this.draw()}}let a,x=[],y=[],u=[],m=[],w=[];function H(){const t=n.width/2,i=n.height/2;a=new X(t,i,10,"white"),x=[],y=[],u=[],m=[],w=[];for(let s=0;s<n.width;s+=30)for(let o=0;o<n.height;o+=30)w.push(new D(s,o,3,"blue"))}function J(){const t=Math.random()*(30-4)+4;let i,s;Math.random()<.5?(i=Math.random()<.5?0-t:n.width+t,s=Math.random()*n.height):(i=Math.random()*n.width,s=Math.random()<.5?0-t:n.height+t);const o=`hsl(${Math.random()*360}, 50%, 50%)`,h=Math.atan2(n.height/2-s,n.width/2-i),l={x:Math.cos(h),y:Math.sin(h)};u.push(new K(i,s,t,o,l))}function Q(){let t,i;Math.random()<.5?(t=Math.random()<.5?0-7:n.width+7,i=Math.random()*n.height):(t=Math.random()*n.width,i=Math.random()<.5?0-9:n.height+9);const s=Math.atan2(n.height/2-i,n.width/2-t),o={x:Math.cos(s),y:Math.sin(s)};x.push(new z(t,i,o))}function T(t,i){const s=document.createElement("label");s.innerHTML=i,s.style.position="absolute",s.style.color="white",s.style.userSelect="none",s.style.left=t.x+"px",s.style.top=t.y+"px",document.body.appendChild(s),gsap.to(s,{opacity:0,y:-30,duration:.75,onComplete:()=>{s.parentNode.removeChild(s)}})}let q,d=0,v=0;function I(){q=requestAnimationFrame(I),v++,e.fillStyle="rgba(0, 0, 0, 0.1)",e.fillRect(0,0,n.width,n.height),v%70==0&&J(),v%300==0&&Q(),w.forEach(t=>{const i=Math.hypot(a.x-t.x,a.y-t.y),s=100;i<s?i<70?t.alpha=0:t.alpha=.5:i>=s&&t.alpha<t.initialAlpha?t.alpha+=.01:i>=s&&t.alpha>t.initialAlpha&&(t.alpha-=.01),t.update()}),a.update(),m.forEach((t,i)=>{t.alpha<=0?m.splice(i,1):t.update()}),a.powerUp==="Automatic"&&r.down&&v%4==0&&a.shoot(r,"#FFF500"),x.forEach((t,i)=>{Math.hypot(a.x-t.x,a.y-t.y)-a.radius-t.width/2<1?(a.color="#FFF500",a.powerUp="Automatic",x.splice(i,1),W.play(),setTimeout(()=>{a.powerUp=null,a.color="#FFFFFF"},5e3)):t.update()}),y.forEach((t,i)=>{t.update(),(t.x+t.radius<0||t.x-t.radius>n.width||t.y+t.radius<0||t.y-t.radius>n.height)&&setTimeout(()=>{y.splice(i,1)},0)}),u.forEach((t,i)=>{t.update(),Math.hypot(a.x-t.x,a.y-t.y)-t.radius-a.radius<1&&(cancelAnimationFrame(q),A.style.display="flex",S.innerHTML=d,N.play(),L.active=!1,gsap.to("#whiteModalEl",{opacity:1,scale:1,duration:.45,ease:"expo"})),y.forEach((o,h)=>{if(Math.hypot(o.x-t.x,o.y-t.y)-t.radius-o.radius<.03){for(let c=0;c<t.radius*2;c++)m.push(new $(o.x,o.y,Math.random()*2,t.color,{x:(Math.random()-.5)*(Math.random()*6),y:(Math.random()-.5)*(Math.random()*6)}));t.radius-10>5?(C.play(),d+=100,M.innerHTML=d,T(o,100),gsap.to(t,{radius:t.radius-10}),setTimeout(()=>{y.splice(h,1)},0)):(R.play(),d+=250,M.innerHTML=d,T(o,250),w.forEach(c=>{c.color=t.color,gsap.to(c,{alpha:.5,duration:.015,onComplete:()=>{gsap.to(c,{alpha:c.initialAlpha,duration:.03})}})}),setTimeout(()=>{u.find(O=>O===t)&&(u.splice(i,1),y.splice(h,1))},0))}})})}const r={down:!1,x:void 0,y:void 0};addEventListener("mousedown",({clientX:t,clientY:i})=>{r.x=t,r.y=i,r.down=!0});addEventListener("mousemove",({clientX:t,clientY:i})=>{r.x=t,r.y=i});addEventListener("mouseup",()=>{r.down=!1});addEventListener("touchstart",t=>{r.x=t.touches[0].clientX,r.y=t.touches[0].clientY,r.down=!0});addEventListener("touchmove",t=>{r.x=t.touches[0].clientX,r.y=t.touches[0].clientY});addEventListener("touchend",()=>{r.down=!1});addEventListener("click",({clientX:t,clientY:i})=>{L.active&&a.powerUp!=="Automatic"&&(r.x=t,r.y=i,a.shoot(r))});addEventListener("resize",()=>{n.width=innerWidth,n.height=innerHeight,H()});U.addEventListener("click",()=>{H(),I(),G.play(),L.active=!0,d=0,M.innerHTML=d,S.innerHTML=d,f.play(),gsap.to("#whiteModalEl",{opacity:0,scale:.75,duration:.25,ease:"expo.in",onComplete:()=>{A.style.display="none"}})});addEventListener("keydown",({keyCode:t})=>{switch(t===87?a.velocity.y-=1:t===65?a.velocity.x-=1:t===83?a.velocity.y+=1:t===68&&(a.velocity.x+=1),t){case 37:a.velocity.x-=1;break;case 40:a.velocity.y+=1;break;case 39:a.velocity.x+=1;break;case 38:a.velocity.y-=1;break}});g.addEventListener("click",()=>{console.log("mute"),f.volume=0,E.style.display="block",g.style.display="none"});E.addEventListener("click",()=>{console.log("sound on"),f.volume=1,E.style.display="none",g.style.display="block"});
